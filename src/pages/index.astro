---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section.astro';
import Hero from '../components/Hero.astro';
import SkillTag from '../components/SkillTag.astro';
import { getCollection } from 'astro:content';
import { formatDateShort } from '../utils/date.ts';
import { Image } from 'astro:assets';
import logoImage from '../assets/logo.png';
import ConnectBlock from '../components/ConnectBlock.astro';
import { personalInfo } from '../data/personal-info.ts';

// Get recent blog posts
const allBlogPosts = await getCollection('blog');
const recentPosts = allBlogPosts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<Layout title="Home" description="Austin Cole - Deputy IT Director, CISO, Emergency Management Leader, Ham Radio Operator, and ITDRC Volunteer">
	<!-- Hero Section -->
	<Hero 
		title="Austin Cole"
		description="Deputy IT Director & CISO | Emergency Management Leader | Ham Radio Operator | ITDRC Volunteer"
		variant="large"
		showLogo={true}
		logoImage={logoImage}
		logoAlt="Austin Cole Logo"
		backgroundLogo={true}
		actions={[
			{ label: "Learn More About Me", href: "/about/", variant: "primary" },
			{ label: "View Testimonials", href: "/testimonials/", variant: "secondary" },
			{ label: "Read My Blog", href: "/blog/", variant: "secondary" }
		]}
	/>

<!-- About Preview -->
<Section padding="lg">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div>
            <h2 class="section-subheading">
                Passionate About Technology & Community
            </h2>
            <p class="text-gray-600 dark:text-gray-300 mb-6 text-lg">
                With over 20 years in IT and cybersecurity, I serve as Deputy IT Director and CISO while leading emergency management initiatives in my community. From founding nonprofits to serving as an EMT/Firefighter and volunteering with ITDRC, I'm dedicated to using technology to strengthen communities and enhance emergency preparedness.
            </p>
            <div class="flex flex-wrap gap-3">
                <SkillTag variant="lg">Cybersecurity</SkillTag>
                <SkillTag variant="lg">Emergency Management</SkillTag>
                <SkillTag variant="lg">Ham Radio</SkillTag>
                <SkillTag variant="lg">IoT Projects</SkillTag>
            </div>
        </div>
        <div class="card">
            <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">
                Current Roles
            </h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-medium text-gray-900 dark:text-gray-100">Deputy IT Director & CISO</h4>
                    <p class="text-gray-600 dark:text-gray-300">Latah County</p>
                </div>
                <div>
                    <h4 class="font-medium text-gray-900 dark:text-gray-100">President & Founder</h4>
                    <p class="text-gray-600 dark:text-gray-300">CommUnity NexUs, Inc. & DSARC</p>
                </div>
                <div>
                    <h4 class="font-medium text-gray-900 dark:text-gray-100">Unit Commander & County EC</h4>
                    <p class="text-gray-600 dark:text-gray-300">Latah County Aux Comm & ARES</p>
                </div>
                <div>
                    <h4 class="font-medium text-gray-900 dark:text-gray-100">Volunteer</h4>
                    <p class="text-gray-600 dark:text-gray-300">IT Disaster Resource Center (ITDRC)</p>
                </div>
                <div>
                    <h4 class="font-medium text-gray-900 dark:text-gray-100">EMT/Firefighter</h4>
                    <p class="text-gray-600 dark:text-gray-300">Genesee Fire Department</p>
                </div>
            </div>
        </div>
    </div>
</Section>

<!-- Latest Blog Posts -->
<Section variant="gray" padding="lg">
    <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4">
            Latest Blog Posts
        </h2>
        <p class="text-gray-600 dark:text-gray-300 text-lg">
            Thoughts on technology, security, emergency management, and more
        </p>
    </div>
    
    {recentPosts.length > 0 ? (
        <div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {recentPosts.map((post) => (
                    <article class="card hover:shadow-md transition-shadow duration-200">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">
                            <a href={`/blog/${post.id}/`} class="hover:text-brand-600 dark:hover:text-brand-400 transition-colors duration-200">
                                {post.data.title}
                            </a>
                        </h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">
                            {post.data.description}
                        </p>
                        <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                            <time datetime={post.data.pubDate.toISOString()}>
                                {formatDateShort(post.data.pubDate)}
                            </time>
                            <a href={`/blog/${post.id}/`} class="text-brand-600 dark:text-brand-400 hover:text-brand-700 dark:hover:text-brand-300 font-medium">
                                Read more â†’
                            </a>
                        </div>
                    </article>
                ))}
            </div>
            <div class="text-center mt-8">
                <a href="/blog/" class="btn btn-primary">
                    View All Posts
                </a>
            </div>
        </div>
    ) : (
        <div class="text-center">
            <p class="text-gray-600 dark:text-gray-300">
                Blog posts coming soon! Check back later for updates on technology, security, and emergency management.
            </p>
        </div>
    )}
</Section>

<!-- Contact Section -->
<ConnectBlock personalInfo={personalInfo} variant="full" showTitle={true} />
</Layout>
